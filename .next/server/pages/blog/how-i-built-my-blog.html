<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ce8029f531f8de8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ce8029f531f8de8d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/a29ed70e1ad7f7ff.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a29ed70e1ad7f7ff.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-71e149bd9a6f2c0d.js" defer=""></script><script src="/_next/static/chunks/framework-3b7283d6a8166ac6.js" defer=""></script><script src="/_next/static/chunks/main-e30ba8f4087d3abf.js" defer=""></script><script src="/_next/static/chunks/pages/_app-64effea832d81a80.js" defer=""></script><script src="/_next/static/chunks/494-025a33dbdf652f45.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-51c0cab32cea2ec3.js" defer=""></script><script src="/_next/static/nHC_wPCys7ZMSwFw2T-m8/_buildManifest.js" defer=""></script><script src="/_next/static/nHC_wPCys7ZMSwFw2T-m8/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div data-theme="cyberpunk"><div class="bg-base-200"><nav class="sticky top-0 z-10 py-3 border-b-2 border-neutral bg-base-100"><main class="flex items-center justify-between w-full px-5"><h3 class="text-lg md:text-2xl font-bold text-primary cursor-pointer"><a href="/">elanmed.dev</a></h3><div><span class="hidden mr-4 text-xs sm:inline">check out my blog! <span class="text-lg text-primary">→</span></span><span class="cursor-pointer select-none hover:underline hover:text-primary transition"><a href="/blog">blog</a></span></div></main></nav><main class="min-h-screen w-full max-w-5xl m-auto py-6 bg-base-100 px-2 md:px-20"><div><div class="pb-2 mb-8 text-sm italic border-b-2 text-primary border-b-base-300 w-max">last updated: <!-- -->August 11, 2022</div><div class="markdown_markdown__28kdH"><h1>How I Built My Blog</h1>
<p>I&#x27;m a big fan of tech blogs. Compared to a video or dev talk, they&#x27;re often shorter, more intentional, quicker to skim when needed, and when dealing with difficult content, easier to review and re-read. They&#x27;re also fun to write – especially when most of your typing is coding. I&#x27;ve been wanting to write my own blog for some time now, and with a break in some of my other side-projects, I finally got around to it!</p>
<p>This post shouldn&#x27;t function as a step-by-step tutorial, but rather a high-level overview of the tech stack I use along with a few of my thoughts.</p>
<h2>Client</h2>
<p>I decided to use <a href="https://nextjs.org/">Next.js</a> as my front-end framework because of it&#x27;s optimization for static site generation. With SSG, every page is pre-rendered at build time and served to the user immediately. This is distinct from server side rendering, which renders the requested page at request-time. Since my blog renders the same content for every user, it makes a great use case for pre-rendering the site with SSG.</p>
<p>I looked into some other frameworks that specialize in SSG, but Next.js had the best combination of popularity – which goes hand-in-hand with online resources – and a good ratio of framework-specific quirks to features.</p>
<h3>Design</h3>
<p>I decided to use <a href="https://tailwindcss.com/">tailwindcss</a> as my CSS &quot;framework&quot;. I&#x27;ve experimented in the past with css-modules, plain scss, and <a href="https://vanilla-extract.style/">vanilla extract</a>, but I&#x27;ve found tailwind to be my favorite so far. Nothing can beat its dx.</p>
<p>Design isn&#x27;t my strong suit, so I decided to go with <a href="https://daisyui.com/">daisyui</a> as my component library. I mostly write my own components, but daisyui has some great color themes too.</p>
<p>I write my blog posts in Markdown, which has an awesome syntax for writing, and some really nice default styles. I looked into using <a href="https://mdxjs.com/">mdx</a>, which has support for JSX components, but it seemed a bit overkill for my usecases. It&#x27;s a relatively new technology with a few kinks to work out (i.e. what to bundle when importing a component), so I think I&#x27;ll wait a bit.</p>
<p>When I want to apply tailwind or daisyui styles to my markdown, I&#x27;ve found it easiest to wrap the section in a div with a custom attribute. I just select for that attribute in my s/css, and it applies the styles as expected. For instance, I&#x27;ll import the following scss into the component where I parse my markdown:</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-scss" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc7832">[data-daisy=&quot;alert-info&quot;] </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>  </span><span class="token rule" style="color:#cc7832">@apply</span><span class="token" style="color:#cc7832"> alert alert-info shadow-lg my-6</span><span class="token" style="color:#a9b7c6">;</span><span class="token" style="color:#cc7832">
</span><span class="token" style="color:#cc7832">
</span><span class="token" style="color:#cc7832">  &amp; a</span><span> </span><span class="token" style="color:#a9b7c6">{</span><span>
</span><span>    @apply text-secondary-content </span><span class="token" style="color:#9876aa">hover</span><span class="token" style="color:#a9b7c6">:</span><span>text-accent-focus</span><span class="token" style="color:#a9b7c6">;</span><span>
</span><span>  </span><span class="token" style="color:#a9b7c6">}</span><span>
</span><span></span><span class="token" style="color:#a9b7c6">}</span></code></div></pre>
<p>It&#x27;s a little hacky, but it works well for me.</p>
<h3>Atropos</h3>
<p>For the fancy 3D paralax image on the homepage, I use <a href="https://atroposjs.com/">Atropos</a>. The library is surprisingly minimal, and the documentation barebones, so I&#x27;ve had to reverse engineer a few of features I wanted from the examples on their site. This blog is <a href="https://github.com/ElanMedoff/personal-site">open source</a>, so maybe I can save you from doing the same!</p>
<h2>Server</h2>
<p>On the server side of things, I host my blog on a <a href="https://www.digitalocean.com/">digial ocean</a> droplet – the cheapest one available. I use <a href="https://www.nginx.com/">nginx</a> as a proxy for my Next.js server, and <a href="https://certbot.eff.org/">certbot</a> to set up my ssl certificate.</p>
<p>To manage my production code, I use <a href="https://toroid.org/git-website-howto">this setup</a> to push changes to the server with the command <code class="inline-block px-3 py-0 text-sm rounded bg-base-300">git push server</code>. It&#x27;s barebones, low-level, and awesome.</p>
<p>For my <em>very</em> basic continuous integration, I wrote the following deploy script:</p>
<pre><code class="inline-block px-3 py-0 text-sm rounded bg-base-300">#!/bin/bash
npm run build
git add -A
git commit -m &quot;$1&quot;
git push origin master
git push server
</code></pre>
<p>Notice that I run the build step locally instead of on the server – my $4 droplet didn&#x27;t have the power to build the site itself :( This clutters the github repo and slows down pushes, but it works fine for now.</p>
<p>I use a systemd service to run my Next.js server, and I restart the service automatically when new code is pushed – it just took one line added to the post-receive hook:</p>
<pre><div style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#2b2b2b"><code class="language-text" style="color:#a9b7c6;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>sudo systemctl restart next</span></code></div></pre>
<p>I&#x27;ll write a full post on my minimal approach to continuous integration, but this should do for now.</p>
<h3>Bonus: Some of my Favorite Blog Posts</h3>
<ul>
<li><a href="https://overreacted.io/a-complete-guide-to-useeffect/">A Complete Guide to useEffect</a></li>
<li><a href="https://remix.run/blog/remix-vs-next">Remix vs Next.js</a></li>
<li><a href="https://kentcdodds.com/blog/fix-the-slow-render-before-you-fix-the-re-render">Fix the slow render before you fix the re-render</a></li>
<li><a href="https://dev.to/this-is-learning/why-efficient-hydration-in-javascript-frameworks-is-so-challenging-1ca3">Why Efficient Hydration in JavaScript Frameworks is so Challening</a></li>
<li><a href="https://www.developerway.com/posts/how-to-write-performant-react-code">How to write Performant React code: rules, patterns, do&#x27;s and don&#x27;ts</a></li>
<li><a href="https://hasura.io/blog/best-practices-of-using-jwt-with-graphql">The Ultimate Guide to handling JWTs on frontend clients</a></li>
<li><a href="https://aaronparecki.com/oauth-2-simplified/">OAuth 2 Simplified</a></li>
</ul>
<p>With some luck, maybe one of mine will make it onto the list.</p></div><div class="w-1/2 divider"></div><div><p class="mb-3 text-sm italic text-primary">you may also like:</p><div class="max-w-[500px] cursor-pointer rounded-2xl flex items-center p-3 gap-3 border-base-100 border-2 hover:border-primary"><div class=""><h2 class="font-semibold mb-1">Data Fetching in React: Parent-Agnostic vs Parent-Dependent Children</h2><p class="text-xs italic mb-2">July 27, 2022</p><p class="text-xs mb-2">Null checking: who should have to do it? The child, or the parent?</p><div><span class="bg-secondary text-secondary-content rounded-full px-4 py-1 text-xs mr-1">react</span><span class="bg-secondary text-secondary-content rounded-full px-4 py-1 text-xs mr-1">software eng</span></div></div></div></div></div></main><footer class="flex justify-center py-4 text-xs border-t-base-300 border-t bg-base-100"><span>© elan medoff</span></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\n# How I Built My Blog\n\nI'm a big fan of tech blogs. Compared to a video or dev talk, they're often shorter, more intentional, quicker to skim when needed, and when dealing with difficult content, easier to review and re-read. They're also fun to write – especially when most of your typing is coding. I've been wanting to write my own blog for some time now, and with a break in some of my other side-projects, I finally got around to it!\n\nThis post shouldn't function as a step-by-step tutorial, but rather a high-level overview of the tech stack I use along with a few of my thoughts.\n\n## Client\n\nI decided to use [Next.js](https://nextjs.org/) as my front-end framework because of it's optimization for static site generation. With SSG, every page is pre-rendered at build time and served to the user immediately. This is distinct from server side rendering, which renders the requested page at request-time. Since my blog renders the same content for every user, it makes a great use case for pre-rendering the site with SSG.\n\nI looked into some other frameworks that specialize in SSG, but Next.js had the best combination of popularity – which goes hand-in-hand with online resources – and a good ratio of framework-specific quirks to features.\n\n### Design\n\nI decided to use [tailwindcss](https://tailwindcss.com/) as my CSS \"framework\". I've experimented in the past with css-modules, plain scss, and [vanilla extract](https://vanilla-extract.style/), but I've found tailwind to be my favorite so far. Nothing can beat its dx.\n\nDesign isn't my strong suit, so I decided to go with [daisyui](https://daisyui.com/) as my component library. I mostly write my own components, but daisyui has some great color themes too.\n\nI write my blog posts in Markdown, which has an awesome syntax for writing, and some really nice default styles. I looked into using [mdx](https://mdxjs.com/), which has support for JSX components, but it seemed a bit overkill for my usecases. It's a relatively new technology with a few kinks to work out (i.e. what to bundle when importing a component), so I think I'll wait a bit.\n\nWhen I want to apply tailwind or daisyui styles to my markdown, I've found it easiest to wrap the section in a div with a custom attribute. I just select for that attribute in my s/css, and it applies the styles as expected. For instance, I'll import the following scss into the component where I parse my markdown:\n\n```scss\n[data-daisy=\"alert-info\"] {\n  @apply alert alert-info shadow-lg my-6;\n\n  \u0026 a {\n    @apply text-secondary-content hover:text-accent-focus;\n  }\n}\n```\n\nIt's a little hacky, but it works well for me.\n\n### Atropos\n\nFor the fancy 3D paralax image on the homepage, I use [Atropos](https://atroposjs.com/). The library is surprisingly minimal, and the documentation barebones, so I've had to reverse engineer a few of features I wanted from the examples on their site. This blog is [open source](https://github.com/ElanMedoff/personal-site), so maybe I can save you from doing the same!\n\n## Server\n\nOn the server side of things, I host my blog on a [digial ocean](https://www.digitalocean.com/) droplet – the cheapest one available. I use [nginx](https://www.nginx.com/) as a proxy for my Next.js server, and [certbot](https://certbot.eff.org/) to set up my ssl certificate.\n\nTo manage my production code, I use [this setup](https://toroid.org/git-website-howto) to push changes to the server with the command `git push server`. It's barebones, low-level, and awesome.\n\nFor my _very_ basic continuous integration, I wrote the following deploy script:\n\n```\n#!/bin/bash\nnpm run build\ngit add -A\ngit commit -m \"$1\"\ngit push origin master\ngit push server\n```\n\nNotice that I run the build step locally instead of on the server – my $4 droplet didn't have the power to build the site itself :( This clutters the github repo and slows down pushes, but it works fine for now.\n\nI use a systemd service to run my Next.js server, and I restart the service automatically when new code is pushed – it just took one line added to the post-receive hook:\n\n```text\nsudo systemctl restart next\n```\n\nI'll write a full post on my minimal approach to continuous integration, but this should do for now.\n\n### Bonus: Some of my Favorite Blog Posts\n\n- [A Complete Guide to useEffect](https://overreacted.io/a-complete-guide-to-useeffect/)\n- [Remix vs Next.js](https://remix.run/blog/remix-vs-next)\n- [Fix the slow render before you fix the re-render](https://kentcdodds.com/blog/fix-the-slow-render-before-you-fix-the-re-render)\n- [Why Efficient Hydration in JavaScript Frameworks is so Challening](https://dev.to/this-is-learning/why-efficient-hydration-in-javascript-frameworks-is-so-challenging-1ca3)\n- [How to write Performant React code: rules, patterns, do's and don'ts](https://www.developerway.com/posts/how-to-write-performant-react-code)\n- [The Ultimate Guide to handling JWTs on frontend clients](https://hasura.io/blog/best-practices-of-using-jwt-with-graphql)\n- [OAuth 2 Simplified](https://aaronparecki.com/oauth-2-simplified/)\n\nWith some luck, maybe one of mine will make it onto the list.\n","metadata":{"title":"How I Built My Blog","abstract":"The stack I chose, client and server.","lastUpdated":"August 11, 2022","slug":"how-i-built-my-blog","tags":["software eng","devops"],"priority":1,"collection":null}},"relatedPostMetadata":{"title":"Data Fetching in React: Parent-Agnostic vs Parent-Dependent Children","abstract":"Null checking: who should have to do it? The child, or the parent?","lastUpdated":"July 27, 2022","slug":"Parent-dependent-and-parent-agnostic-children","tags":["react","software eng"],"priority":0,"collection":null}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"how-i-built-my-blog"},"buildId":"nHC_wPCys7ZMSwFw2T-m8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>