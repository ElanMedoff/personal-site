<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ce8029f531f8de8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ce8029f531f8de8d.css" data-n-g=""/><link rel="preload" href="/_next/static/css/3b4248633e7fe4e9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3b4248633e7fe4e9.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-71e149bd9a6f2c0d.js" defer=""></script><script src="/_next/static/chunks/framework-3b7283d6a8166ac6.js" defer=""></script><script src="/_next/static/chunks/main-e30ba8f4087d3abf.js" defer=""></script><script src="/_next/static/chunks/pages/_app-64effea832d81a80.js" defer=""></script><script src="/_next/static/chunks/494-025a33dbdf652f45.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-51c0cab32cea2ec3.js" defer=""></script><script src="/_next/static/_jJYmafmmNgETnSyz0rr5/_buildManifest.js" defer=""></script><script src="/_next/static/_jJYmafmmNgETnSyz0rr5/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div data-theme="cyberpunk"><div class="bg-base-200"><nav class="sticky top-0 z-10 py-3 border-b-2 border-neutral bg-base-100"><main class="flex items-center justify-between w-full px-5"><h3 class="text-lg md:text-2xl font-bold text-primary cursor-pointer"><a href="/">elanmed.dev</a></h3><div><span class="hidden mr-4 text-xs sm:inline">check out my blog! <span class="text-lg text-primary">→</span></span><span class="cursor-pointer select-none hover:underline hover:text-primary transition"><a href="/blog">blog</a></span></div></main></nav><main class="min-h-screen w-full max-w-5xl m-auto py-6 bg-base-100 px-2 md:px-20"><div><div class="pb-2 mb-8 text-sm italic border-b-2 text-primary border-b-base-300 w-max">last updated: <!-- -->August 9, 2022</div><div class="markdown_markdown__28kdH"><h1>Test-Driven Refactoring</h1>
<p>Test-driven development holds a strange place in software engineering culture: everyone seems to agree we should do it, but nobody actually wants to.</p>
<p>For reference, Wikipedia defines test-driven development as:</p>
<div data-daisy="alert">
a software development process relying on software requirements being converted to test cases before software is fully developed
</div>
<p>Or in other words, writing your tests before writing your code.</p>
<p>The purported benefits are less-buggy code and a smoother dx – but in my experience, this rarely pans out.</p>
<p>Part of the philosophy of test-driven development is that by solely testing software requirements, you can avoid testing implementation details. In fact, test-driven development relies on this pattern – you can&#x27;t test implementation details you haven&#x27;t written yet!</p>
<p>In principle, I would agree with this. If you <em>truly</em> only test software requirements, you could refactor the implementation behind your code without rewriting a single test. What a dream.</p>
<p>Unfortunately, this is rarely possible. When testing frontend code, you sometimes need to hook into DOM elements directly in your tests. Other times, you may even <em>want</em> to test implementation details – was this api call made in the correct circumstances? That&#x27;s an important detail that&#x27;s difficult to test before you&#x27;ve written your code.</p>
<hr/>
<p>That being said, I still very much value the utility of tests – but for refactoring, not development. Here me out:</p>
<p>I&#x27;m a big believer in being unafraid of my code. If I want to update a feature, refactor my types into some fancy conditional generics, I don&#x27;t want to be afraid of silently breaking my app. I need the freedom to update my code when I think best, and tests give me the confidence necessary to make these changes.</p>
<p>In other words, I&#x27;m not afraid of breaking my app; I&#x27;m afraid of <em>silently</em> breaking my app. If I have good test coverage, that&#x27;ll never happen.</p>
<p>So for those who are skeptical of test-driven development: don&#x27;t give up on tests altogether. Write tests to catch regressions, not to speed-up writing original code. Adopt test-driven refactoring, not test-driven development.</p></div><div class="w-1/2 divider"></div><div><p class="mb-3 text-sm italic text-primary">you may also like:</p><div class="max-w-[500px] cursor-pointer rounded-2xl flex items-center p-3 gap-3 border-base-100 border-2 hover:border-primary"><div class=""><h2 class="font-semibold mb-1">VSCode-Style Git Diffs the Vim Way</h2><p class="text-xs italic mb-2">August 11, 2022</p><p class="text-xs mb-2">Check your git diffs with Vim faster than you ever have with VSCode</p><div><span class="bg-secondary text-secondary-content rounded-full px-4 py-1 text-xs mr-1">software eng</span><span class="bg-secondary text-secondary-content rounded-full px-4 py-1 text-xs mr-1">vim</span></div></div></div></div></div></main><footer class="flex justify-center py-4 text-xs border-t-base-300 border-t bg-base-100"><span>© elan medoff</span></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\n# Test-Driven Refactoring\n\nTest-driven development holds a strange place in software engineering culture: everyone seems to agree we should do it, but nobody actually wants to.\n\nFor reference, Wikipedia defines test-driven development as:\n\n\u003cdiv data-daisy=\"alert\"\u003e\na software development process relying on software requirements being converted to test cases before software is fully developed\n\u003c/div\u003e\n\nOr in other words, writing your tests before writing your code.\n\nThe purported benefits are less-buggy code and a smoother dx – but in my experience, this rarely pans out.\n\nPart of the philosophy of test-driven development is that by solely testing software requirements, you can avoid testing implementation details. In fact, test-driven development relies on this pattern – you can't test implementation details you haven't written yet!\n\nIn principle, I would agree with this. If you _truly_ only test software requirements, you could refactor the implementation behind your code without rewriting a single test. What a dream.\n\nUnfortunately, this is rarely possible. When testing frontend code, you sometimes need to hook into DOM elements directly in your tests. Other times, you may even _want_ to test implementation details – was this api call made in the correct circumstances? That's an important detail that's difficult to test before you've written your code.\n\n---\n\nThat being said, I still very much value the utility of tests – but for refactoring, not development. Here me out:\n\nI'm a big believer in being unafraid of my code. If I want to update a feature, refactor my types into some fancy conditional generics, I don't want to be afraid of silently breaking my app. I need the freedom to update my code when I think best, and tests give me the confidence necessary to make these changes.\n\nIn other words, I'm not afraid of breaking my app; I'm afraid of _silently_ breaking my app. If I have good test coverage, that'll never happen.\n\nSo for those who are skeptical of test-driven development: don't give up on tests altogether. Write tests to catch regressions, not to speed-up writing original code. Adopt test-driven refactoring, not test-driven development.\n","metadata":{"title":"Test-Driven Refactoring","abstract":"Why we should approach tests from the angle of refactoring rather than development.","lastUpdated":"August 9, 2022","slug":"test-driven-refactoring","tags":["software eng"],"priority":0,"collection":null}},"relatedPostMetadata":{"title":"VSCode-Style Git Diffs the Vim Way","abstract":"Check your git diffs with Vim faster than you ever have with VSCode","lastUpdated":"August 11, 2022","slug":"vscode-style-git-diffs-the-vim-way","tags":["software eng","vim"],"priority":0,"collection":null}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"test-driven-refactoring"},"buildId":"_jJYmafmmNgETnSyz0rr5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>